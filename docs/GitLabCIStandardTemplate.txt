= Continuous Integration Standard (LegalTech) =

{{info}}
**Important:** All new microservices must use this base template to ensure compatibility with the legal auditing system.
{{/info}}

== Pipeline Configuration (.gitlab-ci.yml) ==

Copy the following block into the root of your repository:

{{code language="yaml"}}
stages:

* build
* test
* security_scan
* deploy

variables:
MAVEN_OPTS: "-Dhttps.protocols=TLSv1.2 -Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository"

build_service:
stage: build
image: maven:3.8-openjdk-17
script:
  - echo "Starting service compilation..."
  - mvn clean package -B
artifacts:
paths:
  - target/*.jar

unit_tests:
stage: test
script:
  - echo "Running unit tests (JUnit)..."
  - mvn test

security_check:
stage: security_scan
script:
  - echo "Scanning static vulnerabilities..."
  - /usr/bin/security-checker --audit-level=HIGH

deploy_staging:
stage: deploy
script:
  - echo "Deploying to Staging environment..."
  - ./scripts/deploy_k8s.sh
only:
  - develop
{{/code}}

== Contact ==
If you have issues with the pipeline, contact the DevOps team in the #devops-support channel.
